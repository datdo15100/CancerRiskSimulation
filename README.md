# Cancer Risk Simulation Project

**Team Members:**
- Nguyen Dang Trung - 2440054
- Do Thanh Dat - 2440059
- Nguyen Thanh Binh - 2440052

## Installation

This project is developed on the **Gama Platform**.

1. Please install the Gama Platform from [gama-platform.org](https://gama-platform.org/download) if you don't have it installed.
2. Download the project using this command:
   ```bash
   git clone https://github.com/datdo15100/CancerRiskSimulation.git

3. Run the project in Gama :D

________________________________________________
# Cancer Risk Simulation with PM2.5 Exposure (GAMA)

## 1. Project Overview

**Goal**: Build an agent-based simulation (using **GAMA**) to study how **urban air pollution (PM2.5)** generated by daily human mobility (commuting) diffuses in a city and contributes to **long-term cancer risk** of inhabitants.

The project combines:

* GIS-based city data (roads, buildings, districts)
* Traffic-induced PM2.5 emissions
* Spatial diffusion + temporal decay of pollution
* Individual-level exposure accumulation
* A formalized cancer **risk model** (from exposure → risk score → probability)

This project is **conceptual + explanatory**, aimed at:

* illustrating environmental health risk mechanisms
* comparing scenarios (baseline vs HEZ/LEZ, traffic intensity, policies)

---

## 2. High-level Simulation Flow (End-to-End)

### Macro Flow

1. **City initialization**

   * Load road network, buildings, and district boundaries
   * Create a pollution grid (50×50)
   * Initialize inhabitants with home/work locations

2. **Daily mobility**

   * Inhabitants commute between home and work
   * While moving, they emit PM2.5 (traffic pollution)

3. **Pollution dynamics**

   * Emitted PM2.5 is injected into grid cells
   * Pollution diffuses spatially across the grid
   * Pollution decays over time (natural dissipation)

4. **Human exposure**

   * Each inhabitant inhales PM2.5 from the grid cell they occupy
   * Exposure accumulates over time

5. **Risk computation**

   * Exposure is mapped to a cancer risk score
   * Risk score is mapped to a probability (0–1)

6. **Aggregation & visualization**

   * District-level PM and risk statistics
   * Heatmaps (pollution, risk)
   * Agent-level risk visualization

---

## 3. Spatial & Data Model

### 3.1 Spatial Layers

| Layer          | Source            | Purpose                          |
| -------------- | ----------------- | -------------------------------- |
| Roads          | OSM / shapefile   | Agent movement + emission source |
| Buildings      | OSM / shapefile   | Home / work locations            |
| Districts      | GADM / GSO        | Aggregation, labeling, HEZ/LEZ   |
| Pollution Grid | GAMA grid (50×50) | Pollution storage & diffusion    |

---

### 3.2 Districts & Zones

Each **district** is characterized by:

* `name`
* `building_count`
* `road_length`

**Automatic zoning**:

* HEZ (High Exposure Zone): top 20% density / traffic
* LEZ (Low Exposure Zone): bottom 20%
* NORMAL: others

This allows policy scenario testing without manual drawing.

---

## 4. Agent Model (Inhabitant)

### 4.1 State Variables

| Variable              | Meaning                       |
| --------------------- | ----------------------------- |
| `location`            | Current position              |
| `home_building`       | Home                          |
| `work_building`       | Work                          |
| `is_inside_building`  | Indoor/outdoor state          |
| `base_emission_rate`  | PM2.5 emission potential      |
| `cumulative_exposure` | Total inhaled PM              |
| `risk_score`          | Latent cancer risk index      |
| `risk_prob`           | Cancer risk probability (0–1) |

---

### 4.2 Movement Logic

* Morning: home → work
* Evening: work → home
* Movement constrained to road network

While **moving**:

* Emit PM2.5
* Inhale PM2.5

While **indoors**:

* No emission
* (Optionally reduced exposure)

---

## 5. Pollution Model (Core of the Simulation)

### 5.1 Emission Model

Each moving inhabitant emits PM2.5:

### Formal

[
E_i(t) = r_i \cdot v_i(t) \cdot \Delta t
]

Where:

* (r_i): base emission rate of inhabitant *i*
* (v_i(t)): speed at time *t*
* (\Delta t): simulation step duration (hours)

### GAMA-style Logic

* Identify grid cell containing the agent
* Add emission to that cell’s PM value

---

### 5.2 Pollution Storage

Each grid cell stores:

| Variable     | Meaning                |
| ------------ | ---------------------- |
| `pm`         | PM2.5 concentration    |
| `grid_value` | Used for visualization |

---

### 5.3 Diffusion Model

PM2.5 spreads spatially across the grid using **uniform diffusion**.

### Formal

[
PM_{t+1}(x) = \sum_{y \in N(x)} w_{xy} PM_t(y)
]

Where:

* (N(x)): neighboring cells
* (w_{xy}): uniform diffusion weights

### Implementation

Use GAMA built-in:

```
diffuse var: pm on: pollution_grid;
```

---

### 5.4 Decay Model

Every hour, **10% of pollution disappears**.

### Formal

[
PM(t + \Delta t) = PM(t) \cdot (1 - d)^{\Delta t}
]

Where:

* (d = 0.1) per hour

This ensures realism and prevents infinite accumulation.

---

## 6. Exposure Model

Each inhabitant inhales pollution from their current grid cell.

### Formal Exposure

[
Exposure_i(t) = PM(x_i,t) \cdot \Delta t
]

### Cumulative Exposure

[
C_i(t) = \sum_{\tau=0}^{t} Exposure_i(\tau)
]

---

## 7. Cancer Risk Model

### 7.1 Risk Score (Latent Variable)

The **risk score** is NOT a probability.
It is a cumulative latent index.

### Formal

[
RiskScore_i(t+1) = RiskScore_i(t) + w_{pm} \cdot X_{pm,i}(t)
]

Where:

* (X_{pm,i} = \min(1, C_i / PM_{ref}))
* (PM_{ref}): reference exposure level

---

### 7.2 Probability Mapping (Logistic Function)

Risk score is mapped to a probability using a sigmoid:

### Formal

[
P_i = \frac{1}{1 + e^{-(a + b \cdot RiskScore_i + \sum_k w_k X_{k,i})}}
]

Where:

* (P_i \in [0,1])
* (a): baseline risk
* (b): sensitivity
* (X_k): other risk factors (optional)

This guarantees:

* 0 → no risk
* 1 → very high risk

---

## 8. Metrics & Outputs

### Individual-level

* Cumulative PM exposure
* Risk score
* Cancer risk probability

### District-level

* Mean PM2.5
* Mean cancer risk
* Population at high risk (> threshold)

### Visual Outputs

* Pollution heatmap (grid mesh)
* District labels & coloring
* Agent coloring by risk

---

## 9. Scenarios & Experiments

| Scenario     | Description                    |
| ------------ | ------------------------------ |
| Baseline     | Normal traffic                 |
| High traffic | Increased emission rates       |
| HEZ/LEZ      | Reduced traffic in LEZ         |
| Policy       | Emission caps / decay increase |

---

## 10. Expected Outcomes

* Show **how mobility creates pollution hotspots**
* Show **long-term accumulation of health risk**
* Demonstrate **non-linear risk emergence**
* Compare districts and policies qualitatively



## 12. Extensions (Future Work)

* Indoor/outdoor exposure difference
* Age / smoking / water / food risk factors
* Calibration with real PM2.5 data
* Multi-cancer modeling
* Validation against epidemiological studies

---

## 13. Summary (One Paragraph)

This project simulates how daily urban mobility generates PM2.5 pollution, how pollution diffuses and decays in space, how individuals accumulate exposure, and how that exposure is transformed into a probabilistic cancer risk using a formal, explainable model. It provides a transparent, scenario-driven framework for studying environmental health risks in cities using agent-based modeling.
